/*
-----------------------------
-- 1
-----------------------------
*/

CREATE SEQUENCE MD_AKSES_KD_AKSES_SEQ;

CREATE TABLE MD_AKSES(
	KD_AKSES	INTEGER	 NOT NULL DEFAULT nextval('MD_AKSES_KD_AKSES_SEQ') PRIMARY KEY,
	NM_AKSES	VARCHAR	(100),
	KETERANGAN	VARCHAR	(1000)
);

ALTER SEQUENCE MD_AKSES_KD_AKSES_SEQ OWNED BY MD_AKSES.KD_AKSES;


/*
-----------------------------
-- 2
-----------------------------
*/

CREATE TYPE STATUS AS ENUM('A','N');

CREATE TABLE MD_MENU (
	KD_MENU		VARCHAR	(50) PRIMARY KEY,
	NM_MENU		VARCHAR	(100),
	URUT		INTEGER,
	NM_LINK		VARCHAR	(100),
	STATUS		STATUS,
	LEVEL_MENU	VARCHAR	(50),
	KD_SUBMENU	VARCHAR	(50),
	KETERANGAN	VARCHAR	(250),
	ICON 		VARCHAR (100)
);


/*
-----------------------------
-- 3
-----------------------------
*/

CREATE TABLE MD_DEPARTEMEN(
	KD_DEPARTEMEN	VARCHAR	(50) PRIMARY KEY,
	NM_DEPARTEMEN	VARCHAR	(100),
	KETERANGAN		VARCHAR	(250),
	STATUS			STATUS
);


/*
-----------------------------
-- 4
-----------------------------
*/

CREATE TABLE MD_UNIT(
	KD_UNIT			VARCHAR	(50) PRIMARY KEY,
	KD_DEPARTEMEN	VARCHAR (50),
	NM_UNIT			VARCHAR	(100),
	KETERANGAN		VARCHAR	(250),
	STATUS			STATUS,

	FOREIGN KEY (KD_DEPARTEMEN) REFERENCES MD_DEPARTEMEN(KD_DEPARTEMEN)
);



/*
-----------------------------
-- 5
-----------------------------
*/

CREATE TABLE MD_AKSES_MENU(
	KD_AKSES_MENU	VARCHAR	(50) PRIMARY KEY,
	NM_AKSES_MENU	VARCHAR	(100),
	LIST_MENU		TEXT,
	STATUS			STATUS,
	KETERANGAN		VARCHAR	(250)
);


/*
-----------------------------
-- 6
-----------------------------
*/

CREATE SEQUENCE MD_USER_ID_USER_SEQ;
CREATE TYPE KELAMIN AS ENUM('L','P');

CREATE TABLE MD_USER(
	ID_USER			INTEGER NOT NULL DEFAULT nextval('MD_USER_ID_USER_SEQ') PRIMARY KEY,
	EMAIL			VARCHAR	(100),
	NO_HP			VARCHAR	(50),
	PASSWORD		VARCHAR	(100),
	NAMA			VARCHAR	(100),
	KD_AKSES		INTEGER,
	STATUS			STATUS,
	KD_AKSES_MENU	VARCHAR	(50),
	KD_DEPARTEMEN	VARCHAR	(50),
	KD_UNIT			VARCHAR	(50),
	KELAMIN			KELAMIN,
	FOTO			BYTEA,

	FOREIGN KEY (KD_AKSES) REFERENCES MD_AKSES(KD_AKSES),
	FOREIGN KEY (KD_AKSES_MENU) REFERENCES MD_AKSES_MENU(KD_AKSES_MENU),
	FOREIGN KEY (KD_DEPARTEMEN) REFERENCES MD_DEPARTEMEN(KD_DEPARTEMEN),
	FOREIGN KEY (KD_UNIT) REFERENCES MD_UNIT(KD_UNIT)
);

ALTER SEQUENCE MD_USER_ID_USER_SEQ OWNED BY MD_USER.ID_USER;